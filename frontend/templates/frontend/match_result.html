{% extends "frontend/base.html" %}
{% load static %}

{% block title %}Match Result{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2>Resume-Job Match Result</h2>
    
    <div class="card mt-4">
        <div class="card-body">
            <h5 class="card-title">Resume: {{ resume.file.name }}</h5>
            <h5 class="card-title">Job: {{ job.title }}</h5>
            
            <div class="mt-3">
                <h4>Match Score: {{ match_score|default:"0" }}%</h4>
                {% if match_score %}
                    <div class="progress mt-2" style="height: 30px;">
                        <div class="progress-bar {% if match_score > 70 %}bg-success{% elif match_score > 40 %}bg-warning{% else %}bg-danger{% endif %}" 
                             role="progressbar" 
                             style="width: {{ match_score }}%;"  
                             aria-valuenow="{{ match_score }}" 
                             aria-valuemin="0" 
                             aria-valuemax="100">
                        </div>
                    </div>
                {% endif %}
            </div>

            {% if missing_skills %}
            <div class="mt-4">
                <h5>Recommended Skills to Add:</h5>
                <ul class="list-group">
                    {% for skill in missing_skills %}
                        <li class="list-group-item">{{ skill|title }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% else %}
            <div class="mt-4">
                <p>No specific recommendations found.</p>
                {% if resume.skills %}
                    <p><strong>Your skills:</strong> {{ resume.skills|join:", " }}</p>
                {% endif %}
                {% if job.required_skills %}
                    <p><strong>Job requires:</strong> {{ job.required_skills|join:", " }}</p>
                {% endif %}
            </div>
            {% endif %}
        </div>
    </div>
    
    <div class="mt-3">
        <a href="{% url 'match_page' %}" class="btn btn-primary">Match Another</a>
        <a href="{% url 'home' %}" class="btn btn-secondary">Home</a>
    </div>
</div>
{% endblock %}